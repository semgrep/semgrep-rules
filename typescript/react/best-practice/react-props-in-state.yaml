rules:
- id: react-props-in-state
  pattern-either:
  - patterns:
    - pattern-inside: |
        class $CN extends React.Component {
          ...
        }
    - pattern-either:
      - pattern: |
          state = {$NAME: <... this.props.$PROP ...>}
      - pattern: |
          this.state = {$NAME: <... this.props.$PROP ...>}
  - patterns:
    - pattern-inside: |
        function $FN({$PROP},...) {
          ...
        }
    - pattern-inside: useState(...)
    - pattern: $PROP
  - patterns:
    - pattern-inside: |
        function $FN($PROP,...) {
          ...
        }
    - pattern-inside: useState(...)
    - pattern: $PROP
  message: |
    It is a bad practice to stop the data flow in rendering by copying props into state.
  metadata:
    references:
    - https://overreacted.io/writing-resilient-components/#principle-1-dont-stop-the-data-flow
    category: best-practice
    technology:
    - react
  languages:
  - typescript
  - javascript
  severity: WARNING
