name: semgrep-scanner benchmarks

on:
  workflow_dispatch:
  push:
    branches: [release]
  pull_request:
    branches: [develop, release]
jobs:
  trigger:
    runs-on: ubuntu-20.04
    steps:
      - name: Print github.head_ref
        run: echo ${{ github.head_ref }}
      - name: Print github.ref
        run: echo ${{ github.ref }}
      - name: Print github.triggering_actor
        run: echo ${{github.triggering_actor}}
      - name: Print github.actor
        run: echo ${{github.actor}}
      - name: Verify if member of the team
        # ref: https://docs.github.com/en/rest/teams/members#get-team-membership-for-a-user
        run: |
          curl https://api.github.com/orgs/returntocorp/teams/developers/memberships/${{github.actor}} -H "Accept: application/vnd.github+json" -H "Authorization: token ${{ secrets.GITHUB_TOKEN }}" 
      - name: Trigger semgrep-scanner argo workflow
        run: |
          echo 'curl here'
          #  curl -X POST https://argo.corp.r2c.dev/api/v1/events/security-research/initiate-scan -H "Authorization: ${{ secrets.ARGO_WORKFLOWS_TOKEN }}" -d "{\"branch\" : \"${{steps.extract_branch.outputs.branch}}\" }"
