name: Trigger semgrep-scanner argo workflow

on:
  workflow_dispatch:
  push:
    branches: [release]
  pull_request:
    branches: [develop, release]
jobs:
  trigger:
    runs-on: ubuntu-20.04
    steps:
      - name: Print pull request reference
        run: echo Running on PR ${GITHUB_REF##*/}
      - name: Print branch name
        run: echo "##[set-output name=branch;]$(echo ${GITHUB_REF#refs/heads/})"
        id: extract-branch
      - name: Find PR author
        run: echo ${{ github.event.issue.user.login }}
      - name: Trigger semgrep-scanner argo workflow
        run: |
          echo 'curl' ${{steps.extract_branch.outputs.branc}}
          #  curl -X POST https://argo.corp.r2c.dev/api/v1/events/security-research/initiate-scan -H "Authorization: ${{ secrets.ARGO_WORKFLOWS_TOKEN }}" -d "{\"branch\" : \"${{steps.extract_branch.outputs.branch}}\" }"
